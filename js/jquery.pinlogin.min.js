/*
 * jQuery pinlogin
 * Version 1.0
 * Release: 2018-04-10
 * Author: Bob Hageman
 * Copyright (c) 2018 Bob Hageman
 * Licensed under MIT (https://github.com/bobhageman/jquery-pinlogin/blob/master/LICENSE)
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t={fields:5,placeholder:"\u2022",autofocus:!0,hideinput:!0,reset:!0,complete:function(e){},invalid:function(e,t){},keydown:function(e,t,n){}},n=function(t,n){this.element=t,this.pincode=[],this.fields=[],this.index=0,this.settings=n,this.init()};n.prototype.init=function(){var t=this;e(t.element).data("plugin_pinlogin",t),e(t.element).addClass("pinlogin"),e(t.element).on("focus.pinlogin","input",function(n){t.index=e(this).data("index")}),e(t.element).on("keydown.pinlogin","input",function(n){t.index=e(this).data("index");var i=e.inArray(n.keyCode,[8,9,13,37,38,39,40,46]);if(-1!==i)return!0;if(n.shiftKey||n.ctrlKey||n.altKey)return n.preventDefault(),!1;if(n.keyCode>=48&&n.keyCode<=57||n.keyCode>=96&&n.keyCode<=105){var o=0;n.keyCode>=96&&n.keyCode<=105?o=n.keyCode-96:n.keyCode>=48&&n.keyCode<=57&&(o=n.keyCode-48),t.pincode[t.index]=o;var l=t.pincode[t.index];t.settings.hideinput&&(l=t.settings.placeholder),e(this).val(l);var s=t.fields[t.index+1];s&&e(s).focus().select()}else return t.settings.invalid.call(this,e(this),t.index+1),n.preventDefault(),!1;t.settings.keydown.call(this,n,e(this),t.index+1)}),e(t.element).on("paste.pinlogin","input",function(n){var i=t,o=n.originalEvent.clipboardData.getData("text");e.each(o.split(""),function(t,n){if(!(t>=i.settings.fields))if(n=n.replace(/[^0-9]/g,""),""!=n){i.pincode[i.index]=n;var o=i.pincode[i.index];i.settings.hideinput&&(o=i.settings.placeholder),e(i.fields[i.index]).val(o);var l=i.fields[i.index+1];l?e(l).focus().select():i.check()}}),n.preventDefault()}),t.create(),t.settings.autofocus&&e(t.fields[0]).focus().select()},n.prototype.create=function(){for(var t=0;t<this.settings.fields;t++){var n=e("<input>",{type:"text",maxlength:1,defaultvalue:""});n.data("index",t),this.fields.push(n)}e(this.element).html(this.fields)},n.prototype.check=function(){var t=this.pincode.join(""),n=this;this.settings.complete.call(this,t),this.settings.reset&&setTimeout(function(){n.reset()},50)},n.prototype.reset=function(){this.pincode=[],e.each(this.fields,function(t,n){e(n).val("")}),e(this.fields[0]).focus().select(),this.index=0},n.prototype.focus=function(){e(this.fields[this.index]).focus().select()},e.fn.pinlogin=function(i){var o=e.extend({},t,i);return this.each(function(){e.data(this,"plugin_pinlogin")||new n(this,o)})}});